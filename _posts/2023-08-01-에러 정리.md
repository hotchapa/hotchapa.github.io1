---
layout: post
title: 에러정리
subtitle: 자주 겪은 에러 모음
# cover-img: /assets/img/path.jpg
# thumbnail-img: /assets/img/thumb.png
# share-img: /assets/img/path.jpg
tags: [coding, react, redux]
---

# 에러 모음

CSS는 대부분 div 설정만 잘 해줘도 해결이 잘 되더라.
500 에러는 토큰 만료로 인해 일어나는 경우가 많더라.
payload를 보면 데이터를 어떻게 넘겨줬는 지 알 수 있다.
토큰을 헤더에 담아 Axios 요청을 해야 400번대 에러가 안 난다.

라우팅 컴포넌트 소멸 안함

근데 지우면 또 소멸함

정확히는 다른 컴포넌트를 불러온건데 기존에 있던 컴포넌트를 불러옴 ( 렌더링을 계속 함)

제공해주신 코드를 보면, CommunityBoardDetail 컴포넌트에서 return 문이 누락되어 있습니다. return 문을 추가하여 컴포넌트가 JSX를 반환하도록 수정해야 합니다.

**문제는 CommunityBoardPage 컴포넌트에서 CommunityBoardDetail 컴포넌트를 불러올 때 발생하고 있습니다. 해당 코드에서 CommunityBoardDetail 컴포넌트를 import할 때 import 구문이 잘못되어 BoardCard 컴포넌트를 가져오고 있습니다.**

**CommunityBoardPage 컴포넌트에서 CommunityBoardDetail 컴포넌트를 import하는 부분을 수정해야 합니다. 아래와 같이 수정해주세요:**

```jsx
import { useParams } from "react-router-dom"; // 수정

const CommunityBoardPage = () => {
  const  classification  = useParams(); // 수정
```

const {classification} = useParams(); // 수정

이렇게 하니까 안 먹힘

인자로 넘겨주면

```jsx
// CommunityBoardDetail 컴포넌트
import React from "react";

const CommunityBoardDetail = ({ classification }) => {
  return (
    <div>
      <h1>{classification}</h1>
    </div>
  );
};

export default CommunityBoardDetail;
```

이런식으로 인자로 또 받아와야됨.

---

### 문제

```jsx
const handleCommentSubmit = async (event) => {
  event.preventDefault();
  try {
    await axios.post(`${API_BASE_URL}/comments/${articleid}`, {
      headers: { Authorization: `Bearer ${user.accessToken}` },
      content: newComment,
      writer: user.nickname,
    });
    setNewComment("");
    fetchBoard(); // 댓글 작성 후 게시글 정보 다시 불러오기
  } catch (error) {
    console.error(error);
    console.log("댓글 작성 실패");
  }
};
```

이렇게 하니까 자꾸 500에러 나서

### 답

```jsx
const response = await axios.post(
  `${API_BASE_URL}/comments/${articleid}`,
  {
    content: newComment,
    writer: user.nickname,
  },
  {
    headers: {
      Authorization: `Bearer ${user.accessToken}`,
    },
  }
);
```

이렇게 바꿔주니 됐다.

---

### 문제

지금 이코드는 댓글 작성도 잘 되고 조회도 되는데, 조회가 어쩔땐 되고 어쩔땐 안됩니다. 새로고침을 해야 될때도 있고 안될때도 있고 이상한데 이유가 뭘까요

### 답

댓글 작성은 잘 되는 것으로 보이지만, 조회가 때때로 되지 않는 문제가 발생하는 이유는 API 호출이 비동기적으로 처리되기 때문입니다. **`fetchBoard`**와 **`fetchComments`** 함수는 useEffect에서 호출되고 있으며, 두 함수 모두 비동기 함수인 **`axios.get`**을 사용하고 있습니다. 따라서 이들 함수가 실행될 때 API 호출이 완료되기 전에 렌더링이 완료되어서 데이터가 적용되지 않는 상황이 발생할 수 있습니다.

예를 들어, 댓글 작성 후 **`fetchBoard`** 함수가 호출되지만, 댓글 작성 API 호출이 완료되지 않았을 수 있습니다. 이로 인해 댓글은 작성되었으나, 조회 시에는 아직 댓글이 반영되지 않은 상태가 될 수 있습니다.

해결 방법으로는 **`fetchBoard`**와 **`fetchComments`** 함수를 호출하는 부분을 Promise를 이용하여 순차적으로 처리하는 것이 있습니다. 이를 위해 **`async`** 함수와 **`await`** 키워드를 사용하여 API 호출이 완료될 때까지 기다린 후 다음 작업을 수행하도록 합니다.

아래는 수정된 코드입니다:

```jsx
useEffect(() => {
  // fetchBoard와 fetchComments를 순차적으로 실행하기 위해 async 함수를 사용
  const fetchData = async () => {
    await fetchBoard();
    await fetchComments();
  };

  fetchData();
}, []);
```
